{
  "openapi": "3.0.1",
  "info": {
    "title": "BookCrossing",
    "description": "Server implementation for a book exchange application",
    "contact": {
      "name": "Karina Elagina",
      "email": "karina.elagina2013@yandex.ru"
    },
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://194.67.125.199:8443",
      "description": "Generated server url"
    }
  ],
  "tags": [
    {
      "name": "Управление пользователями для администратора",
      "description": "Позволяет получить и удалять пользователей"
    },
    {
      "name": "Сообщения",
      "description": "Позволяет отправлять сообщения в чаты"
    },
    {
      "name": "Чаты",
      "description": "Редактирование и создание чатов с пользователями"
    },
    {
      "name": "Работа с закладками",
      "description": "Позволяет добавлять, удалять и просматривать закладки"
    },
    {
      "name": "Получение профиля пользователей",
      "description": "Позволяет получить профили пользователей или редактировать свой"
    },
    {
      "name": "Обновление токенов пользователя",
      "description": "Позволяет обновить токены"
    },
    {
      "name": "Сброс пароля",
      "description": "Позволяет получить на привязанную почту ссылку для сброса пароля"
    },
    {
      "name": "Раздел работы с книгами",
      "description": "Позволяет пользователю управлять своими книгами"
    },
    {
      "name": "Регистрация и авторизация пользователей",
      "description": "Позволяет регистрироваться новым пользователям и выдает токен при аутентификации"
    },
    {
      "name": "Вложения к книгам",
      "description": "Позволяет добавить или удалить фотографию книги"
    },
    {
      "name": "Раздел со всеми книгами в системе",
      "description": "Позволяет пользователю получить все книги, доступные для обмена"
    }
  ],
  "paths": {
    "/user/profile": {
      "get": {
        "tags": [
          "Получение профиля пользователей"
        ],
        "summary": "Получение профиля",
        "description": "Возвращает данные профиля по id",
        "operationId": "getProfile",
        "parameters": [
          {
            "name": "userId",
            "in": "header",
            "description": "Идентификатор пользователя",
            "required": false,
            "schema": {
              "type": "string",
              "default": "-1"
            }
          },
          {
            "name": "zone",
            "in": "query",
            "description": "Часовой пояс пользователя",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "409": {
            "description": "Conflict",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "412": {
            "description": "Precondition Failed",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Пользователь не найден",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "200": {
            "description": "Возвращает профиль пользователя",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Получение профиля пользователей"
        ],
        "summary": "Изменение данных пользователя",
        "description": "Возвращает обновленный профиль",
        "operationId": "putProfile",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserPutProfileDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "409": {
            "description": "Неверный пароль",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "412": {
            "description": "Пароли не совпадают",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Пользователь не найден",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "200": {
            "description": "Возвращает обновленный профиль пользователя",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserProfileDto"
                }
              }
            }
          }
        }
      }
    },
    "/user/correspondence/message": {
      "put": {
        "tags": [
          "Сообщения"
        ],
        "summary": "Редактирование сообщения",
        "description": "Позволяет изменить сообщение в чате",
        "operationId": "putMessage",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MessagePutRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "406": {
            "description": "Сообщение должно содержать хотя бы 1 видимый символ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "Сообщение не найдено",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Пользователь не является отправителем сообщения",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "200": {
            "description": "Сообщение изменено",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageDto"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Сообщения"
        ],
        "summary": "Отправка сообщения",
        "description": "Позволяет отправить сообщение в чат",
        "operationId": "sendMessage",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MessageRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "406": {
            "description": "Сообщение должно содержать хотя бы 1 видимый символ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "Чата не существует",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Нет доступа к чату",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "201": {
            "description": "Сообщение отправлено",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageDto"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Сообщения"
        ],
        "summary": "Удаление сообщения у всех",
        "description": "Позволяет удалить сообщение из чата",
        "operationId": "deleteForEveryoneMessage",
        "parameters": [
          {
            "name": "messageId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Сообщение не найдено",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Пользователь не является отправителем",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "200": {
            "description": "Сообщение удалено"
          }
        }
      }
    },
    "/user/myBook": {
      "get": {
        "tags": [
          "Раздел работы с книгами"
        ],
        "summary": "Список книг",
        "description": "Позволяет получить список всех книг пользователя",
        "operationId": "bookList",
        "responses": {
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "200": {
            "description": "Возвращает список книг",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Раздел работы с книгами"
        ],
        "summary": "Добавление книги",
        "description": "Позволяет сохранить книгу для обмена",
        "operationId": "saveBook",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BookDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "406": {
            "description": "Введены некорректные данные",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "201": {
            "description": "Возвращает сохраненную книгу",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BookModelDto"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Раздел работы с книгами"
        ],
        "summary": "Удаление книги",
        "description": "Позволяет удалить книгу по ее id",
        "operationId": "deleteBook",
        "parameters": [
          {
            "name": "bookId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Книга не найдена",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "200": {
            "description": "Удаляет книгу из бд"
          }
        }
      }
    },
    "/user/myBook/attachment": {
      "post": {
        "tags": [
          "Вложения к книгам"
        ],
        "summary": "Отправка вложения",
        "description": "Позволяет сохранить фотографию книги",
        "operationId": "saveAttachment",
        "parameters": [
          {
            "name": "attachmentMultipartDto",
            "in": "query",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/AttachmentMultipartDto"
            }
          }
        ],
        "responses": {
          "415": {
            "description": "Некорректное вложение",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "Книги не существует",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "201": {
            "description": "Вложение сохранено"
          }
        }
      },
      "delete": {
        "tags": [
          "Вложения к книгам"
        ],
        "summary": "Удаление вложения",
        "description": "Позволяет удалить фотографию книги",
        "operationId": "deleteAttachment",
        "parameters": [
          {
            "name": "bookId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "415": {
            "description": "Unsupported Media Type",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Вложения или книги не существует",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "200": {
            "description": "Вложение удалено"
          }
        }
      }
    },
    "/user/correspondence": {
      "get": {
        "tags": [
          "Чаты"
        ],
        "summary": "Получение чата",
        "description": "Позволяет получить чат с выбранным пользователем",
        "operationId": "getCorrespondence",
        "parameters": [
          {
            "name": "firstUserId",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "secondUserId",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "zone",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "404": {
            "description": "Чата не существует",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "403": {
            "description": "Нет доступа к чату",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "200": {
            "description": "Возвращает список сообщений",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Чаты"
        ],
        "summary": "Создание чата",
        "description": "Позволяет создать чат с выбранным пользователем",
        "operationId": "createCorrespondence",
        "parameters": [
          {
            "name": "userId",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "404": {
            "description": "Not Found",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "409": {
            "description": "Чат уже существует",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "406": {
            "description": "Нельзя создать чат с данным пользователем",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "201": {
            "description": "Чат создан",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UsersCorrKeyDto"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Чаты"
        ],
        "summary": "Удаление чата",
        "description": "Позволяет удалить чат с выбранным пользователем",
        "operationId": "deleteCorrespondence",
        "parameters": [
          {
            "name": "userId",
            "in": "header",
            "description": "Идентификатор пользователя",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "404": {
            "description": "Чата не существует",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "200": {
            "description": "Чат удален"
          }
        }
      }
    },
    "/user/bookmarks": {
      "get": {
        "tags": [
          "Работа с закладками"
        ],
        "summary": "Получение списка закладок",
        "description": "Позволяет получить все закладки пользователя",
        "operationId": "getAll",
        "responses": {
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "200": {
            "description": "Возвращает список закладок",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Работа с закладками"
        ],
        "summary": "Добавление в закладки",
        "description": "Позволяет сохранить книгу в закладки",
        "operationId": "saveBookmarks",
        "parameters": [
          {
            "name": "bookId",
            "in": "query",
            "description": "Идентификатор книги",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Книга с заданным Id не найдена",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "201": {
            "description": "Возвращает список закладок",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Работа с закладками"
        ],
        "summary": "Удаление из закладок",
        "description": "Позволяет удалить книгу из закладок",
        "operationId": "deleteBookmarks",
        "parameters": [
          {
            "name": "bookId",
            "in": "query",
            "description": "Идентификатор книги",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Книга с заданным Id не найдена",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "200": {
            "description": "Книга удалена"
          }
        }
      }
    },
    "/reset/update": {
      "post": {
        "tags": [
          "Сброс пароля"
        ],
        "summary": "Смена пароля",
        "description": "Смена пароля по ссылке",
        "operationId": "updatePassword",
        "parameters": [
          {
            "name": "token",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserPasswordDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "403": {
            "description": "Ссылка недействительна",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "409": {
            "description": "Пароли не совпадают",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "201": {
            "description": "Пароль успешно изменен"
          }
        }
      }
    },
    "/reset/send": {
      "post": {
        "tags": [
          "Сброс пароля"
        ],
        "summary": "Запрос на сброс пароля",
        "description": "Отправляет на почту ссылку для сброса пароля",
        "operationId": "sendMessage_1",
        "parameters": [
          {
            "name": "email",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "403": {
            "description": "Forbidden",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Пользователь с таким email не найден",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "200": {
            "description": "Отправляет ссылку на сброс пароля на почту"
          }
        }
      }
    },
    "/registration": {
      "post": {
        "tags": [
          "Регистрация и авторизация пользователей"
        ],
        "summary": "Регистрация пользователя",
        "description": "Возвращает токены, если пользователь успешно зарегистрирован",
        "operationId": "registerUser",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRegistrationDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "403": {
            "description": "Forbidden",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "409": {
            "description": "Пароли не совпадают",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "406": {
            "description": "Введены некорректные данные",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "201": {
            "description": "Отправляет ссылку для подтверждения на почту",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              }
            }
          }
        }
      }
    },
    "/refresh": {
      "post": {
        "tags": [
          "Обновление токенов пользователя"
        ],
        "summary": "Обновление токенов",
        "description": "Выдает токены, если refresh корректен",
        "operationId": "refresh",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "Токена не существует",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "410": {
            "description": "Токен истек",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "200": {
            "description": "Возвращает токены",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/auth": {
      "post": {
        "tags": [
          "Регистрация и авторизация пользователей"
        ],
        "summary": "Авторизация пользователя",
        "description": "Возвращает токены",
        "operationId": "auth",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "403": {
            "description": "Аккаунт не подтвержден или заблокирован",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "Некорректный логин или пароль",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "200": {
            "description": "Возвращает токены",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/adm/nonLocked": {
      "post": {
        "tags": [
          "Управление пользователями для администратора"
        ],
        "summary": "Разблокировка пользователя",
        "description": "Позволяет разблокировать пользователя по его логину",
        "operationId": "nonLockedUser",
        "parameters": [
          {
            "name": "login",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Пользователя с таким логином не существует",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/adm/locked": {
      "post": {
        "tags": [
          "Управление пользователями для администратора"
        ],
        "summary": "Блокирование пользователя",
        "description": "Позволяет заблокировать пользователя по его логину с комментарием",
        "operationId": "lockedUser",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LockedUserDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "406": {
            "description": "Пустой логин или комментарий",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "Пользователя с таким логином не существует",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "200": {
            "description": "Отправляет на почту сообщение о блокировке"
          }
        }
      }
    },
    "/user/profile/users": {
      "get": {
        "tags": [
          "Получение профиля пользователей"
        ],
        "summary": "Список пользователей",
        "description": "Позволяет найти всех пользователей сервиса",
        "operationId": "getAllProfile",
        "parameters": [
          {
            "name": "zone",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "409": {
            "description": "Conflict",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "412": {
            "description": "Precondition Failed",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "200": {
            "description": "Возвращает найденных пользователей",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/registration/confirmation": {
      "get": {
        "tags": [
          "Регистрация и авторизация пользователей"
        ],
        "summary": "Подтвержение почты",
        "description": "Изменяет стату аккаунта на подтвержденный",
        "operationId": "mailConfirm",
        "parameters": [
          {
            "name": "token",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "403": {
            "description": "Forbidden",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Токена не существует",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "200": {
            "description": "Подтверждает почту для аккаунта и возвращает токены",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/books/searchWithFilters": {
      "get": {
        "tags": [
          "Раздел со всеми книгами в системе"
        ],
        "summary": "Поиск книг с фильтрацией",
        "description": "Позволяет найти книги с помощью фильтров",
        "operationId": "searchWithFilters",
        "parameters": [
          {
            "name": "filters",
            "in": "query",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/BookFiltersRequest"
            }
          }
        ],
        "responses": {
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "200": {
            "description": "Возвращает найденные книги",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/books/searchByTitle": {
      "get": {
        "tags": [
          "Раздел со всеми книгами в системе"
        ],
        "summary": "Поиск книг по названию",
        "description": "Позволяет найти книги по названию",
        "operationId": "searchByTitle",
        "parameters": [
          {
            "name": "title",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "200": {
            "description": "Возвращает найденные книги",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/books/info": {
      "get": {
        "tags": [
          "Раздел со всеми книгами в системе"
        ],
        "summary": "Страница книги",
        "description": "Позволяет получить данные выбранной книги",
        "operationId": "bookInfo",
        "parameters": [
          {
            "name": "bookId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Книга не найдена",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "200": {
            "description": "Возвращает данные книги",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BookModelDto"
                }
              }
            }
          }
        }
      }
    },
    "/books/all": {
      "get": {
        "tags": [
          "Раздел со всеми книгами в системе"
        ],
        "summary": "Все книги в системе",
        "description": "Позволяет получить книги всех пользователей",
        "operationId": "books",
        "responses": {
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "200": {
            "description": "Возвращает все книги",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/adm": {
      "get": {
        "tags": [
          "Управление пользователями для администратора"
        ],
        "summary": "Список пользователей",
        "description": "Позволяет получить список пользователей",
        "operationId": "userList",
        "parameters": [
          {
            "name": "zone",
            "in": "query",
            "description": "Часовой пояс",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "200": {
            "description": "Возвращает список пользователей",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/user/correspondence/message/deleteForMe": {
      "delete": {
        "tags": [
          "Сообщения"
        ],
        "summary": "Удаление сообщения у себя",
        "description": "Позволяет удалить сообщение из чата",
        "operationId": "deleteForMeMessage",
        "parameters": [
          {
            "name": "messageId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "406": {
            "description": "Not Acceptable",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Сообщение не найдено",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Нет доступа к чату",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewErrorBody"
                }
              }
            }
          },
          "200": {
            "description": "Сообщение удалено"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "NewErrorBody": {
        "properties": {
          "message": {
            "type": "string",
            "example": "correspondence: Чата не существует"
          }
        }
      },
      "UserPutProfileDto": {
        "required": [
          "name",
          "newPassword",
          "oldPassword",
          "passwordConfirm"
        ],
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Имя",
            "example": "Alex"
          },
          "oldPassword": {
            "type": "string",
            "description": "Старый пароль",
            "example": "123456"
          },
          "newPassword": {
            "maxLength": 2147483647,
            "minLength": 6,
            "type": "string",
            "description": "Новый пароль",
            "example": "123456s"
          },
          "passwordConfirm": {
            "type": "string",
            "description": "Подвержение пароля",
            "example": "123456s"
          },
          "city": {
            "type": "string",
            "description": "Город",
            "example": "Новосибирск"
          }
        },
        "description": "Сущность для изменения данных пользователя"
      },
      "AttachmentDto": {
        "type": "object",
        "properties": {
          "attachId": {
            "type": "integer",
            "format": "int32"
          },
          "data": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "byte"
            }
          },
          "expansion": {
            "type": "string"
          }
        },
        "description": "Вложение"
      },
      "BookModelDto": {
        "required": [
          "author",
          "title"
        ],
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "Название",
            "example": "Портрет Дориана Грея"
          },
          "author": {
            "type": "string",
            "description": "Автор",
            "example": "Оскар Уайльд"
          },
          "genre": {
            "type": "string",
            "description": "Жанр",
            "example": "Классическая проза"
          },
          "publishingHouse": {
            "type": "string",
            "description": "Издательство",
            "example": "АСТ"
          },
          "year": {
            "type": "integer",
            "description": "Год издания",
            "format": "int32",
            "example": 2004
          },
          "bookId": {
            "type": "integer",
            "description": "Идентификатор",
            "format": "int32",
            "example": 15
          },
          "attachment": {
            "$ref": "#/components/schemas/AttachmentDto"
          }
        },
        "description": "Полные данные книги"
      },
      "UserProfileDto": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "integer",
            "description": "Идентификатор",
            "format": "int32",
            "example": 0
          },
          "name": {
            "type": "string",
            "description": "Имя",
            "example": "Alex"
          },
          "login": {
            "type": "string",
            "description": "Логин",
            "example": "Alex"
          },
          "city": {
            "type": "string",
            "description": "Город",
            "example": "Новосибирск"
          },
          "email": {
            "type": "string",
            "description": "Почтовый адрес",
            "example": "kar@mail.ru"
          },
          "books": {
            "uniqueItems": true,
            "type": "array",
            "description": "Книги пользователя",
            "items": {
              "$ref": "#/components/schemas/BookModelDto"
            }
          }
        },
        "description": "Данные пользователя для внутреннего пользования"
      },
      "MessagePutRequest": {
        "required": [
          "text"
        ],
        "type": "object",
        "properties": {
          "messageId": {
            "type": "integer",
            "description": "Идентификатор сообщения",
            "format": "int64"
          },
          "text": {
            "type": "string",
            "description": "Текст сообщения"
          }
        }
      },
      "MessageDto": {
        "type": "object",
        "properties": {
          "messageId": {
            "type": "integer",
            "format": "int64"
          },
          "sender": {
            "type": "integer",
            "format": "int32"
          },
          "text": {
            "type": "string"
          },
          "departureDate": {
            "type": "string"
          },
          "declaim": {
            "type": "boolean"
          }
        }
      },
      "BookDto": {
        "required": [
          "author",
          "title"
        ],
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "Название",
            "example": "Портрет Дориана Грея"
          },
          "author": {
            "type": "string",
            "description": "Автор",
            "example": "Оскар Уайльд"
          },
          "genre": {
            "type": "string",
            "description": "Жанр",
            "example": "Классическая проза"
          },
          "publishingHouse": {
            "type": "string",
            "description": "Издательство",
            "example": "АСТ"
          },
          "year": {
            "type": "integer",
            "description": "Год издания",
            "format": "int32",
            "example": 2004
          }
        },
        "description": "Сущность книги"
      },
      "AttachmentMultipartDto": {
        "type": "object",
        "properties": {
          "bookId": {
            "type": "integer",
            "description": "Идентификатор книги",
            "format": "int32",
            "example": 5
          },
          "file": {
            "type": "string",
            "format": "binary"
          }
        },
        "description": "Сущность вложения книги"
      },
      "UsersCorrKeyDto": {
        "type": "object",
        "properties": {
          "firstUserId": {
            "type": "integer",
            "description": "Идентификатор первого пользователя",
            "format": "int32"
          },
          "secondUserId": {
            "type": "integer",
            "description": "Идентификатор второго пользователя",
            "format": "int32"
          }
        },
        "description": "Сущность для идентификатора чата"
      },
      "MessageRequest": {
        "required": [
          "text"
        ],
        "type": "object",
        "properties": {
          "usersCorrKeyDto": {
            "$ref": "#/components/schemas/UsersCorrKeyDto"
          },
          "text": {
            "type": "string",
            "description": "Текст сообщения"
          }
        },
        "description": "Сущность для сообщения"
      },
      "UserPasswordDto": {
        "required": [
          "password",
          "passwordConfirm"
        ],
        "type": "object",
        "properties": {
          "password": {
            "maxLength": 2147483647,
            "minLength": 6,
            "type": "string",
            "description": "Пароль",
            "example": "123456"
          },
          "passwordConfirm": {
            "type": "string",
            "description": "Подвержение пароля",
            "example": "123456"
          }
        },
        "description": "Сущность для смены пароля"
      },
      "UserRegistrationDto": {
        "required": [
          "login",
          "name",
          "password",
          "password, passwordConfirm"
        ],
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Имя",
            "example": "Alex"
          },
          "login": {
            "type": "string",
            "description": "Логин",
            "example": "LogAll"
          },
          "password": {
            "maxLength": 2147483647,
            "minLength": 6,
            "type": "string",
            "description": "Пароль",
            "example": "123456"
          },
          "passwordConfirm": {
            "type": "string",
            "description": "Подвержение пароля",
            "example": "123456"
          },
          "email": {
            "type": "string",
            "description": "Почта",
            "example": "al@yandex.ru"
          },
          "city": {
            "type": "string",
            "description": "Город",
            "example": "Новосибирск"
          }
        },
        "description": "Сущность пользователя"
      },
      "UserDto": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "integer",
            "description": "Идентификатор",
            "format": "int32",
            "example": 0
          },
          "name": {
            "type": "string",
            "description": "Имя",
            "example": "Alex"
          },
          "login": {
            "type": "string",
            "description": "Логин",
            "example": "alex"
          },
          "email": {
            "type": "string",
            "description": "Почта",
            "example": "al@yandex.ru"
          },
          "city": {
            "type": "string",
            "description": "Город",
            "example": "Новосибирск"
          },
          "accountNonLocked": {
            "type": "boolean",
            "description": "Заблокирован ли аккаунт",
            "example": true
          },
          "enabled": {
            "type": "boolean",
            "description": "Активирован ли аккаунт",
            "example": true
          },
          "loginDate": {
            "type": "integer",
            "description": "Время последнего входа",
            "format": "int64",
            "example": 19845673
          }
        },
        "description": "Данные пользователя"
      },
      "RefreshRequest": {
        "required": [
          "refresh"
        ],
        "type": "object",
        "properties": {
          "refresh": {
            "type": "string",
            "description": "Токен обновления",
            "example": "cac2ce3e-9ff0-49a7-8afc-3dcae34eafea"
          }
        },
        "description": "Сущность для обновления токена"
      },
      "AuthResponse": {
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string",
            "description": "Токен доступа",
            "example": "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJUZXN0IiwiZXhwIjoxNjQwNzk3MjAwfQ"
          },
          "refreshToken": {
            "type": "string",
            "description": "Токен обновления",
            "example": "cac2ce3e-9ff0-49a7-8afc-3dcae34eafea"
          }
        }
      },
      "LoginRequest": {
        "required": [
          "login"
        ],
        "type": "object",
        "properties": {
          "login": {
            "type": "string",
            "description": "Логин",
            "example": "LogAll"
          },
          "password": {
            "maxLength": 2147483647,
            "minLength": 6,
            "type": "string",
            "description": "Пароль",
            "example": "123456"
          },
          "zone": {
            "type": "integer",
            "description": "Часовой пояс пользователя",
            "format": "int32",
            "example": 7
          }
        }
      },
      "LockedUserDto": {
        "required": [
          "comment",
          "login"
        ],
        "type": "object",
        "properties": {
          "login": {
            "type": "string",
            "description": "Логин",
            "example": "LogAll"
          },
          "comment": {
            "type": "string",
            "description": "Комментарий",
            "example": "Неприемлимые комментарии"
          }
        },
        "description": "Сущность для блокировки пользователя"
      },
      "BookFiltersRequest": {
        "type": "object",
        "properties": {
          "city": {
            "type": "string",
            "description": "Город",
            "example": "Новосибирск"
          },
          "title": {
            "type": "string",
            "description": "Название",
            "example": "Портрет Дориана Грея"
          },
          "author": {
            "type": "string",
            "description": "Автор",
            "example": "Оскар Уайльд"
          },
          "genre": {
            "type": "string",
            "description": "Жанр",
            "example": "Классическая проза"
          },
          "publishingHouse": {
            "type": "string",
            "description": "Издательство",
            "example": "АСТ"
          },
          "year": {
            "type": "integer",
            "description": "Год издания",
            "format": "int32",
            "example": 2004
          }
        },
        "description": "Фильтры для книг"
      }
    }
  }
}